C51 COMPILER V9.00   URSTTEST                                                              07/14/2018 20:59:12 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE URSTTEST
OBJECT MODULE PLACED IN .\Output\UrstTest.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Drivers\UrstTest.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -isting\UrstTest.lst) TABS(2) OBJECT(.\Output\UrstTest.obj)

line level    source

   1          /*****************************************************************
   2          **                   大连理工大学 创新创业学院
   3          **                       物联网应用工坊
   4          **---------------------------------------------------------------
   5          ** 项目名称：   WTZP1.0-BlueBerry
   6          ** 日    期：   2018-07-08
   7          ** 作    者：   温武军
   8          **---------------------------------------------------------------
   9          ** 文 件 名：   UrstTest.c
  10          ** 文件说明：   串口异步通讯
  11          ** 更新日志：   2018-7-14 串口0，1都可用了
  12          *****************************************************************/
  13          
  14          /*---------------------INCLUDES----------------------*/
  15          #include "UrstTest.h"
  16          
  17          /*---------------------VARIABLES---------------------*/
  18          extern uint8 Urst2busy;
  19          
  20          /*---------------------FUNCTIONS---------------------*/
  21          /***********************************************************************
  22          ** 函 数 名： InitUart1()
  23          ** 函数说明： 串口1异步通信初始化程序，选择定时器1
  24          **---------------------------------------------------------------------
  25          ** 输入参数： 无
  26          ** 返回参数： 无
  27          ***********************************************************************/
  28          void InitUart1()
  29          {
  30   1        SCON = 0x50; //(0101 0000) 工作方式为方式1,允许接收
  31   1        InitTime1();                                                                  
  32   1      }
  33          /***********************************************************************
  34          ** 函 数 名： UartSend1(unsigned char dat)
  35          ** 函数说明： 单字节发送程序
  36          **---------------------------------------------------------------------
  37          ** 输入参数： uint8
  38          ** 返回参数： 无
  39          ***********************************************************************/
  40          //
  41          void UartSend1(unsigned char dat)
  42          {
  43   1        SBUF=dat;
  44   1        while(!TI);
  45   1        TI=0;
  46   1      }
  47          /***********************************************************************
  48          ** 函 数 名： UartSend1_Byte(unsigned long int dat,unsigned char n)
  49          ** 函数说明： 多字节发送程序//先送低8位再送高8位
  50          **---------------------------------------------------------------------
  51          ** 输入参数： uint32（发送数据），uint8（发送数据字节数）
  52          ** 返回参数： 无
  53          ***********************************************************************/
  54          void UartSend1_Byte(unsigned long int dat,unsigned char n) 
C51 COMPILER V9.00   URSTTEST                                                              07/14/2018 20:59:12 PAGE 2   

  55          {
  56   1        unsigned char i,ch;
  57   1        for(i=0;i<n;i++)
  58   1        {
  59   2          ch=dat;
  60   2          UartSend1(ch);
  61   2          dat=dat>>8;
  62   2        }
  63   1      }
  64          /***********************************************************************
  65          ** 函 数 名： InitUart2()
  66          ** 函数说明： 串口1异步通信初始化程序，选择定时器1
  67          **---------------------------------------------------------------------
  68          ** 输入参数： 无
  69          ** 返回参数： 无
  70          ***********************************************************************/
  71          void InitUart2()
  72          {
  73   1        S2CON = 0x10; //(0001 0000) 允许接收
  74   1        InitTime2();                                                                  
  75   1      }
  76          /***********************************************************************
  77          ** 函 数 名： UartSend2(unsigned char dat)
  78          ** 函数说明： 单字节发送程序
  79          **---------------------------------------------------------------------
  80          ** 输入参数： uint8
  81          ** 返回参数： 无
  82          ***********************************************************************/
  83          void UartSend2(unsigned char dat)
  84          {
  85   1        while (Urst2busy);
  86   1        Urst2busy = 1;
  87   1        S2BUF=dat;
  88   1      }
  89          /***********************************************************************
  90          ** 函 数 名： UartSend2_Byte(unsigned long int dat,unsigned char n)
  91          ** 函数说明： 多字节发送程序//先送低8位再送高8位
  92          **---------------------------------------------------------------------
  93          ** 输入参数： uint8（发送字符串的首地址）
  94          ** 返回参数： 无
  95          ***********************************************************************/
  96          void UartSend2_Byte(unsigned char *dat) 
  97          {
  98   1        while(*dat)
  99   1        {
 100   2          UartSend2(*dat++);
 101   2        }
 102   1      }
 103          /***********************************************************************
 104          ** 函 数 名： UartRec2()
 105          ** 函数说明： 字符串接收程序
 106          **---------------------------------------------------------------------
 107          ** 输入参数： uint8
 108          ** 返回参数： 无
 109          ***********************************************************************/
 110          /*uint8 UartRec2()
 111          {
 112            
 113          }*/


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.00   URSTTEST                                                              07/14/2018 20:59:12 PAGE 3   

   CODE SIZE        =    113    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
