C51 COMPILER V9.00   SYSTEM                                                                07/20/2018 15:42:51 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE SYSTEM
OBJECT MODULE PLACED IN .\Output\System.obj
COMPILER INVOKED BY: E:\Program Files\keil5\C51\BIN\C51.EXE System\System.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTE
                    -XTEND PRINT(.\Listing\System.lst) TABS(2) OBJECT(.\Output\System.obj)

line level    source

   1          /*****************************************************************
   2          **                   大连理工大学 创新创业学院
   3          **                       物联网应用工坊
   4          **---------------------------------------------------------------
   5          ** 项目名称：   WTZP1.0-BlueBerry
   6          ** 日    期：   2018-07-07
   7          ** 作    者：   王老师
   8          **---------------------------------------------------------------
   9          ** 文 件 名：   System.c
  10          ** 文件说明：   系统功能
  11          *****************************************************************/
  12          
  13          /*---------------------INCLUDES----------------------*/
  14          #include ".\Drivers\Drivers.h"
  15          #include ".\Modules\Modules.h"
  16          #include ".\System\System.h"
  17          #include ".\Board\Board.h"
  18          
  19          /*---------------------VARIABLES---------------------*/
  20          //生长参数变量储存区
  21          uint16 DateLiquidT;uint16 DateCO2;uint16 DatePh;
  22          uint16 DateHumidity=0;uint16 DateTemp=0;
  23          int32 DateEc;
  24          uint32 DateLux;
  25          //其他控制参数区
  26          
  27          
  28          /*---------------------FUNCTIONS---------------------*/
  29          
  30          /***********************************************************************
  31          ** 函 数 名： InitSystem()
  32          ** 函数说明： 初始化系统
  33          **---------------------------------------------------------------------
  34          ** 输入参数： 无
  35          ** 返回参数： 无
  36          ***********************************************************************/
  37          void InitSystem(void)
  38          {
  39   1        //传感器初始化区域
  40   1        InitI2C();
  41   1        InitLUX();
  42   1        Init_AD();
  43   1        InitPh();
  44   1        //串口初始化区域
  45   1        InitUart1();
  46   1        InitUart2();
  47   1        //中断或定时器初始化区域
  48   1        InterruptKeyIsr();
  49   1      }
  50          /***********************************************************************
  51          ** 函 数 名： StartSystem()
  52          ** 函数说明： 运行系统
  53          **---------------------------------------------------------------------
  54          ** 输入参数： 无
C51 COMPILER V9.00   SYSTEM                                                                07/20/2018 15:42:51 PAGE 2   

  55          ** 返回参数： 无
  56          ***********************************************************************/
  57          void Sensor()
  58          {
  59   1        //程序区
  60   1        DS18B20Start();
  61   1        Read_AD5933_Temperature(); 
  62   1        DateEc=EC();
  63   1        DateLiquidT=DS18B20();
  64   1        DateLux=Get_Lux();
  65   1        DateCO2=Get_CO2();
  66   1        DatePh=ph();
  67   1        WifidatPack();
  68   1      }
  69          /***********************************************************************
  70          ** 函 数 名： StartSystem()
  71          ** 函数说明： 运行系统
  72          **---------------------------------------------------------------------
  73          ** 输入参数： 无
  74          ** 返回参数： 无
  75          ***********************************************************************/
  76          void StartSystem(void)
  77          {
  78   1        //存储变量区
  79   1        TEST=0;//LED亮
  80   1        //
  81   1          while(1)
  82   1          {
  83   2            delay1s();
  84   2            WifiLink();
  85   2            delay_ms(50);
  86   2            Sensor();
  87   2            delay1s();
  88   2            WifiBeat();
  89   2            TEST = ~TEST; 
  90   2            UartSend1_Byte(0x11,1);
  91   2          }
  92   1      
  93   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    129    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     18    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
